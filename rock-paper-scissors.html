<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock paper scissors</title>
</head>
<body>
    <h3>Rock Paper Scissors</h3>

    <button onclick="
            play_game('rock');
        ">Rock</button>
    <button onclick="
        play_game('paper');
    ">Paper</button>
    <button onclick="
        play_game('scissor');
    ">Scissors</button>

    <br>

    <h4 class="result"></h4>
    <p class="moves"></p>

    <p class="score"></p>
    

    <br>

    <button  onclick="
        score.wins = 0;
        score.loses = 0;
        score.ties = 0;
        localStorage.removeItem('scores');
        //console.log('score has been reset');
        show_score();
    ">Reset Score</button>



</body>
    <script>

        let score = JSON.parse(localStorage.getItem('scores')) || {
            wins: 0,
            loses: 0,
            ties: 0
        };

       

        function show_score(){
          //  console.log(`SCORE:\nwins:${score.wins}\nloses:${score.loses}\nties:${score.ties}`);
          document.querySelector('.score')
            .innerText = `wins:${score.wins}, loses:${score.loses}, ties:${score.ties}`;
        }
        //for showing current score, after reloading page
        show_score();

        function computer_move(){
            let a = Math.floor(Math.random()*10);
            let comp = "";
            if(a <= 3.33)
                comp = "rock";
            else if(a > 3.33 && a <= 6.66)
                comp = "paper";
            else
                comp = "scissor";

            return comp;
        }

        function play_game(str){
            let comp = computer_move();
            let result = "";
            if(str === 'rock'){
                if(comp === 'rock')
                    result = "tie";
                else if(comp === 'paper')
                    result = "you lose";
                else 
                    result = "you win";
            }
            else if(str === 'paper'){
                if(comp === 'rock')
                    result = "you win";
                else if(comp === 'paper')
                    result = "tie";
                else 
                    result = "you lose";
            }
            else{
                if(comp === 'rock')
                    result = "you lose";
                else if(comp === 'paper')
                    result = "you win";
                else 
                    result = "tie";
            }


            if(result === 'you win')
                score.wins += 1;
            else if(result === 'you lose')
                score.loses += 1;
            else 
                score.ties += 1;

            localStorage.setItem('scores', JSON.stringify(score));
            
            document.querySelector('.result')
            .innerText = result.toUpperCase();

            document.querySelector('.moves')
            .innerText = `you chose:${str.toUpperCase()}\ncomputer chose:${comp.toUpperCase()}`;

            show_score();

            /*
            console.log(`you chose: ${str}\ncomputer chose: ${comp}\n${result}`);
            
            */
            
        }
        
  
    </script>
</html>